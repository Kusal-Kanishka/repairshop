<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script> -->
	<!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css">
	<script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js"></script>

	<title>DASHBOARD</title>
</head>

<body style="height: 100vh;">
	<div style="display: flex; flex-direction: row;">
		<!-- sidebar -->
		<div th:replace="sidebar :: side_bar('Dashboard')"></div>
		<!-- /sidebar -->

		<div style="display: flex; flex-direction: column; width: 100vw;">

			<!-- navbar -->
			<div th:replace="navbar :: navbar"></div>
			<!-- /navbar -->

			<!-- main body -->
			<div>
				<div class="row">
					<div class="col">
						<div class="card" style="margin: 10px;">
							<div class="card-header" style="display: flex; justify-content: space-between;">
								<h4>DASHBOARD</h4>
								<!-- <a th:href="@{/new-job}" class="btn btn-primary">NEW JOB</a> -->
							</div>
							<div class="card-body" style="display: flex; flex-direction: row;">
								<div class="container-fluid" style="overflow:scroll; height:81vh;">
									<div class="row">
										<div class="col">
											<div class="card shadow"
												style="margin: 10px; color: rgb(0, 0, 0); background-color: #E36414;">
												<div class="card-header">
													PENDING JOB COUNT
												</div>
												<div class="card-body" style="display: flex; justify-content: center;">
													<h1>10</h1>
												</div>
											</div>
										</div>
										<div class="col">
											<div class="card shadow"
												style="margin: 10px; color: white; background-color: #0F4C5C;">
												<div class="card-header">
													COMPLETED JOB COUNT
												</div>
												<div class="card-body" style="display: flex; justify-content: center;">
													<h1>10</h1>
												</div>
											</div>
										</div>
									</div>
									<hr>
									<div class="row">
										<div class="col">
											<div class="card shadow" style="margin: 10px;color: white;">
												<button type="button" class="btn" data-bs-toggle="modal"
													style="background-color: #00A5CF;" data-bs-target="#JOB">
													<div class="card-body"
														style="display: flex;flex-direction: column	;color: white; justify-content: center; align-items: center; text-align: center;">
														<!-- Button trigger modal -->

														<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"
															fill="currentColor" class="bi bi-tools" viewBox="0 0 16 16">
															<path
																d="M1 0 0 1l2.2 3.081a1 1 0 0 0 .815.419h.07a1 1 0 0 1 .708.293l2.675 2.675-2.617 2.654A3.003 3.003 0 0 0 0 13a3 3 0 1 0 5.878-.851l2.654-2.617.968.968-.305.914a1 1 0 0 0 .242 1.023l3.27 3.27a.997.997 0 0 0 1.414 0l1.586-1.586a.997.997 0 0 0 0-1.414l-3.27-3.27a1 1 0 0 0-1.023-.242L10.5 9.5l-.96-.96 2.68-2.643A3.005 3.005 0 0 0 16 3c0-.269-.035-.53-.102-.777l-2.14 2.141L12 4l-.364-1.757L13.777.102a3 3 0 0 0-3.675 3.68L7.462 6.46 4.793 3.793a1 1 0 0 1-.293-.707v-.071a1 1 0 0 0-.419-.814L1 0Zm9.646 10.646a.5.5 0 0 1 .708 0l2.914 2.915a.5.5 0 0 1-.707.707l-2.915-2.914a.5.5 0 0 1 0-.708ZM3 11l.471.242.529.026.287.445.445.287.026.529L5 13l-.242.471-.026.529-.445.287-.287.445-.529.026L3 15l-.471-.242L2 14.732l-.287-.445L1.268 14l-.026-.529L1 13l.242-.471.026-.529.445-.287.287-.445.529-.026L3 11Z" />
														</svg>

														ADD NEW JOB
													</div>
												</button>
											</div>
										</div>
										<div class="col">
											<div class="card shadow" style="margin: 10px;color: white;">
												<button type="button" class="btn y" data-bs-toggle="modal"
													style="background-color: #25A18E;" data-bs-target="#VEHICLE">
													<div class="card-body"
														style="display: flex;flex-direction: column	;color: white; justify-content: center; align-items: center; text-align: center;">
														<!-- Button trigger modal -->

														<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"
															fill="currentColor" class="bi bi-car-front-fill"
															viewBox="0 0 16 16">
															<path
																d="M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679c.033.161.049.325.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.807.807 0 0 0 .381-.404l.792-1.848ZM3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2H6ZM2.906 5.189a.51.51 0 0 0 .497.731c.91-.073 3.35-.17 4.597-.17 1.247 0 3.688.097 4.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 11.691 3H4.309a.5.5 0 0 0-.447.276L2.906 5.19Z" />
														</svg>

														ADD NEW VEHICLE
													</div>
												</button>
											</div>
										</div>
										<div class="col">
											<div class="card shadow" style="margin: 10px;color: white;">
												<button type="button" class="btn" data-bs-toggle="modal"
													style="background-color: #3C1642;" data-bs-target="#CUSTOMER">
													<div class="card-body"
														style="display: flex;flex-direction: column	;color: white; justify-content: center; align-items: center; text-align: center;">
														<!-- Button trigger modal -->

														<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30"
															fill="currentColor" class="bi bi-people-fill"
															viewBox="0 0 16 16">
															<path
																d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216ZM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z" />
														</svg>

														ADD NEW CUSTOMER
													</div>
												</button>
											</div>
										</div>
									</div>
									<hr>
									<div class="row">
										<div class="col" style="  margin-bottom: 25px;">
											<div class="card shadow">
												<div class="card-header">
													PENDING JOBS
												</div>
												<div class="card-body">
													<div>
														<table class="table table-striped table-bordered"
															id="sortTable1">
															<thead>
																<tr>
																	<th>Job ID</th>
																	<th>Vehicle Number</th>
																	<th>Date</th>
																	<th>vehicleModel</th>
																	<th>customerName</th>
																	<th>customerMobile</th>
																	<th>Status</th>
																	<!-- <th>Actions</th> -->
																</tr>
															</thead>
															<tbody>
																<tr th:each="job : ${pendingJobList}">
																	<td>
																		<span th:text="${job.jobId}"></span>
																	</td>
																	<td><span th:text="${job.vehicleNumber}"></span>
																	</td>
																	<td><span th:text="${job.createdDate}"></span> </td>
																	<td><span
																			th:style="${job.vehicleModel == 'Vehicle Not Available' ? 'color:red' : 'color:black'}"
																			th:text="${job.vehicleModel}"></span></td>
																	<td><span
																			th:style="${job.customerName == 'Customer Not Available' ? 'color:red' : 'color:black'}"
																			th:text="${job.customerName}"></span></td>
																	<td><span
																			th:style="${job.customerName == 'Customer Not Available' ? 'color:red' : 'color:black'}"
																			th:text="${job.customerMobile}"></span></td>
																	<td><span th:text="${job.status}"></span></td>
																	<!-- <td>

																	<a th:href="@{'/updateJob/'+${job.id}}"
																		class="btn btn-primary">UPDATE</a>
																	<a th:href="@{/deletePendingJob/(id=${job.id})}"
																		class="btn btn-danger" data-bs-toggle="modal"
																		data-bs-target="#deleteModel"
																		id="deleteButton">DELETE</a>
																</td> -->
																</tr>
															</tbody>
														</table>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div>
				<!-- Modal Job-->
				<div class="modal fade" id="JOB" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="exampleModalLabel">ADD NEW JOB</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal"
									aria-label="Close"></button>
							</div>
							<div class="modal-body">
								<form th:action="@{/addNewJob}" method="post" th:object="${job}">
									<div
										style="display: flex; flex-direction: column; justify-content: space-between; flex-wrap: wrap;">
										<div class="mb-3">
											<label for="vehicleNumber" class="form-label">Vehicle Number</label>
											<input type="text" class="form-control" id="vehicleNumber"
												th:field="*{vehicle_number}">
										</div>
										<div class="mb-3" hidden>
											<label for="date" class="form-label">Date</label>
											<input type="date" class="form-control" id="date" th:field="*{date}">
										</div>
										<div class="mb-3">
											<select class="form-select" name="employee" id="employee"
												th:field="*{employeeId}">
												<option value="0">--- Select Technician ---</option>
												<option th:each="employee : ${employees}" th:value="${employee.id}"
													th:content th:text="${employee.firstName +' '+ employee.lastName}">
												</option>
											</select>
										</div>
									</div>
									<div>
										<div class="mb-3">
											<label for="customerStory" class="form-label">Customer Story</label>
											<textarea class="form-control" id="customerStory"
												th:field="*{customer_story}" rows="3"></textarea>
										</div>
									</div>
									<button type="button" class="btn btn-secondary"
										data-bs-dismiss="modal">Close</button>
									<input type="submit" class="btn btn-primary" value="ADD NEW JOB">
								</form>
							</div>
							<!-- <div class="modal-footer">
								<button type="button" class="btn btn-primary">Save changes</button>
							</div> -->
						</div>
					</div>
				</div>

				<!-- Modal VEHICLE-->
				<div class="modal fade" id="VEHICLE" tabindex="-1" aria-labelledby="exampleModalLabel"
					aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="exampleModalLabel">ADD NEW VEHICLE</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal"
									aria-label="Close"></button>
							</div>
							<div class="modal-body">
								<form th:action="@{/addNewVehicle/save}" method="post" th:object="${vehicle}">
									<div
										style="display: flex; flex-direction: column; justify-content: space-between; flex-wrap: wrap;">
										<div class="mb-3">
											<label for="vehicleNumber" class="form-label">Vehicle Number</label>
											<input type="text" class="form-control" id="vehicleNumber"
												th:field="*{vehicleNumber}">
										</div>

										<div class="mb-3">
											<label for="brand" class="form-label">Brand</label>
											<input type="text" class="form-control" id="brand" placeholder="Ex : Tesla"
												th:field="*{brand}">
										</div>
										<div class="mb-3">
											<label for="model" class="form-label">Model</label>
											<input type="text" class="form-control" id="model" th:field="*{model}"
												rows="3" placeholder="Ex : Model S">
										</div>
										<div class="mb-3">
											<select class="form-select" name="customer" id="customer"
												th:field="*{customerId}">
												<option value="0">--- Select Customer ---</option>
												<option th:each="customer : ${customers}" th:value="${customer.id}"
													th:content th:text="${customer.customerName}">
												</option>
											</select>
										</div>
									</div>
									<button type="button" class="btn btn-secondary"
										data-bs-dismiss="modal">Close</button>
									<input type="submit" class="btn btn-primary" value="ADD NEW CUSTOMER">
								</form>
							</div>
							<!-- <div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
								<button type="button" class="btn btn-primary">Save changes</button>
							</div> -->
						</div>
					</div>
				</div>

				<!-- Modal CUSTOMER-->
				<div class="modal fade" id="CUSTOMER" tabindex="-1" aria-labelledby="exampleModalLabel"
					aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="exampleModalLabel">ADD NEW CUSTOMER</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal"
									aria-label="Close"></button>
							</div>
							<div class="modal-body">
								<form th:action="@{/addNewCustomer}" method="post" th:object="${customer}">
									<div
										style="display: flex; flex-direction: column; justify-content: space-between; flex-wrap: wrap;">
										<div class="mb-3">
											<label for="customerName" class="form-label">Customer Name</label>
											<input type="text" class="form-control" id="customerName"
												th:field="*{customerName}">
										</div>

										<div class="mb-3">
											<label for="contactNumber" class="form-label">Contact Number</label>
											<input type="text" class="form-control" id="contactNumber"
												placeholder="07XXXXXXXX" th:field="*{contactNumber}">
										</div>
									</div>
									<div>
										<div class="mb-3">
											<label for="nic" class="form-label">NIC Number</label>
											<input type="text" class="form-control" id="nic" th:field="*{nic}" rows="3"
												placeholder="123456789v">
										</div>
									</div>
									<button type="button" class="btn btn-secondary"
										data-bs-dismiss="modal">Close</button>
									<input type="submit" class="btn btn-primary" value="ADD NEW CUSTOMER">
								</form>
							</div>
							<!-- <div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
								<button type="button" class="btn btn-primary">Save changes</button>
							</div> -->
						</div>
					</div>
				</div>
			</div>
			<!-- /main body -->
		</div>
	</div>

	<script>
		$('#sortTable1').DataTable();
	</script>

	<!-- <script>
		$('.table #deleteButton').on('click', function (event) {
			event.preventDefault();
			var href = $(this).attr('href');
			$('#deleteModel #delRef').attr('href', href);
			$('#exampleModal').modal();
		})
	</script> -->

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous"></script>
</body>

</html>